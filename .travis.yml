dist: xenial
language: cpp
os: linux

before_install:
  - sudo dpkg --add-architecture armhf
    # ubuntu screws up from adding armhf, so we have to tell it what repos to exclude armhf from

  - echo "deb [arch=amd64] http://archive.ubuntu.com/ubuntu/ xenial main restricted" > /etc/apt/sources.list
  - echo "deb-src [arch=amd64] http://archive.ubuntu.com/ubuntu/ xenial main restricted" >>  /etc/apt/sources.list
  - echo "deb [arch=amd64] http://archive.ubuntu.com/ubuntu/ xenial-updates main restricted " >>  /etc/apt/sources.list
  - echo "deb-src [arch=amd64] http://archive.ubuntu.com/ubuntu/ xenial-updates main restricted" >>  /etc/apt/sources.list
  - echo "deb [arch=amd64]  http://archive.ubuntu.com/ubuntu/ xenial universe" >>  /etc/apt/sources.list
  - echo "deb-src [arch=amd64]  http://archive.ubuntu.com/ubuntu/ xenial universe" >>  /etc/apt/sources.list
  - echo "deb [arch=amd64]  http://archive.ubuntu.com/ubuntu/ xenial-updates universe" >>  /etc/apt/sources.list
  - echo "deb-src [arch=amd64]  http://archive.ubuntu.com/ubuntu/ xenial-updates universe" >>  /etc/apt/sources.list
  - echo "deb [arch=amd64]  http://archive.ubuntu.com/ubuntu/ xenial multiverse" >>  /etc/apt/sources.list
  - echo "deb-src [arch=amd64]  http://archive.ubuntu.com/ubuntu/ xenial multiverse" >>  /etc/apt/sources.list
  - echo "deb [arch=amd64]  http://archive.ubuntu.com/ubuntu/ xenial-updates multiverse" >>  /etc/apt/sources.list
  - echo "deb-src [arch=amd64]  http://archive.ubuntu.com/ubuntu/ xenial-updates multiverse" >>  /etc/apt/sources.list
  - echo "deb [arch=amd64]  http://archive.ubuntu.com/ubuntu/ xenial-backports main restricted universe multiverse" >>  /etc/apt/sources.list
  - echo "deb-src [arch=amd64]  http://archive.ubuntu.com/ubuntu/ xenial-backports main restricted universe multiverse" >>  /etc/apt/sources.list
  - echo "deb [arch=amd64] http://security.ubuntu.com/ubuntu xenial-security main restricted" >>  /etc/apt/sources.list
  - echo "deb-src [arch=amd64] http://security.ubuntu.com/ubuntu xenial-security main restricted" >>  /etc/apt/sources.list
  - echo "deb [arch=amd64] http://security.ubuntu.com/ubuntu xenial-security universe" >>  /etc/apt/sources.list
  - echo "deb-src [arch=amd64] http://security.ubuntu.com/ubuntu xenial-security universe" >>  /etc/apt/sources.list
  - echo "deb [arch=amd64] http://security.ubuntu.com/ubuntu xenial-security multiverse" >>  /etc/apt/sources.list
  - echo "deb-src [arch=amd64] http://security.ubuntu.com/ubuntu xenial-security multiverse" >>  /etc/apt/sources.list
  - echo "deb [arch=armhf] http://ports.ubuntu.com/ xenial main universe" >>  /etc/apt/sources.list
  
  - sudo apt update
  - sudo apt install crossbuild-essential-armhf build-essential:armhf
  - sudo apt-get install libc6-armhf-cross libc6-dev-armhf-cross binutils-arm-linux-gnueabi libncurses5-dev
  - sudo apt install python3-pip python3-dev 
  - sudo apt build-dep -y  libsfml-dev libncurses5-dev libyaml-cpp-dev cmake || sudo apt install -f 
  - sudo apt install -y libsfml-devlibncurses5-dev libyaml-cpp-dev cmake || sudo apt install -f 
  - sudo apt-get -y --force-yes --reinstall -f install libc6:armhf libc6-dev:armhf


  #- sudo -H python3 -m pip install --upgrade pip wheel setuptools
  #- sudo -H python3 -m pip install conan
  - wget https://archive.raspberrypi.org/debian/pool/main/w/wiringpi/wiringpi_2.50_armhf.deb
  - sudo dpkg -i wiringpi_2.50_armhf.deb || sudo apt install -f  
  - sudo dpkg -i wiringpi_2.50_armhf.deb


install: echo "install"

script:
  - echo "First test"
  #- conan install .
  - wget -O rf24.tar.gz https://github.com/nRF24/RF24/archive/v1.3.3.tar.gz
  - tar -xzf  rf24.tar.gz
  - ( cd RF24-1.3.3; ./configure --driver=wiringPi; sudo make install; )
